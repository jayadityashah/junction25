<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EU Financial Document Analysis</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://unpkg.com/vis-network@9.1.6/dist/vis-network.min.js"></script>
  </head>
  <body>
    <!-- Landing page with risk categories -->
    <div id="landing-page" class="container">
      <header>
        <h1>EU Financial Document Analysis</h1>
        <p class="subtitle">
          Explore overlaps and contradictions in regulatory documents
        </p>
        <div class="nav-tabs">
          <button class="tab-button active" data-tab="graph">Graph View</button>
          <button class="tab-button" data-tab="chat">GraphRAG Chat</button>
        </div>
      </header>

      <div id="graph-tab" class="tab-content active">
        <div class="risk-categories" id="risk-categories">
          <!-- Risk category cards will be added here -->
        </div>
      </div>

      <div id="chat-tab" class="tab-content" style="display: none">
        <div class="chat-container">
          <div class="chat-messages" id="chat-messages">
            <div class="chat-message bot">
              <div class="message-content">
                <p>
                  Hello! I can help you query the GraphRAG knowledge graph of
                  regulatory documents.
                </p>
                <p>Try asking questions like:</p>
                <ul>
                  <li>
                    What are the credit risk requirements in EU regulations?
                  </li>
                  <li>
                    Compare liquidity risk requirements between EU and Finnish
                    regulations
                  </li>
                  <li>What are the capital requirements under CRR?</li>
                </ul>
              </div>
            </div>
          </div>
          <div class="chat-input-container">
            <input
              type="text"
              id="chat-input"
              placeholder="Ask a question about regulatory documents..."
            />
            <button id="chat-send" class="send-button">Send</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Graph view page -->
    <div id="graph-page" class="container" style="display: none">
      <header>
        <button id="back-button" class="back-button">← Back</button>
        <div>
          <h1 id="graph-title">Risk Category</h1>
          <p id="graph-subtitle" class="subtitle"></p>
        </div>
        <button id="sidebar-toggle" class="sidebar-toggle">☰ List</button>
      </header>

      <div class="graph-container">
        <div id="network" class="network"></div>

        <!-- Right Sidebar -->
        <div id="graph-sidebar" class="graph-sidebar collapsed">
          <div class="sidebar-header">
            <div class="sidebar-tabs">
              <button class="sidebar-tab-button active" data-sidebar-tab="documents">Documents</button>
              <button class="sidebar-tab-button" data-sidebar-tab="relationships">Relationships</button>
            </div>
          </div>

          <!-- Documents Tab -->
          <div id="sidebar-documents" class="sidebar-tab-content active">
            <div id="documents-list" class="sidebar-list">
              <!-- Documents will be populated here -->
            </div>
          </div>

          <!-- Relationships Tab -->
          <div id="sidebar-relationships" class="sidebar-tab-content">
            <div id="relationships-list" class="sidebar-list">
              <!-- Relationships will be populated here -->
            </div>
          </div>
        </div>

        <!-- Visual Legend -->
        <div class="graph-legend">
          <div class="legend-item">
            <svg width="90" height="50" class="legend-svg">
              <rect
                x="5"
                y="10"
                width="80"
                height="30"
                rx="2"
                fill="#ffffff"
                stroke="#2563eb"
                stroke-width="2"
              />
              <text
                x="45"
                y="29"
                text-anchor="middle"
                font-size="12"
                font-family="arial"
                font-weight="bold"
                fill="#1e293b"
              >
                Regulation
              </text>
            </svg>
            <span class="legend-label">Document</span>
          </div>
          <div class="legend-item">
            <svg width="90" height="20" class="legend-svg">
              <line
                x1="5"
                y1="10"
                x2="85"
                y2="10"
                stroke="#3b82f6"
                stroke-width="3"
              />
            </svg>
            <span class="legend-label">Overlap</span>
          </div>
          <div class="legend-item">
            <svg width="90" height="20" class="legend-svg">
              <line
                x1="5"
                y1="10"
                x2="85"
                y2="10"
                stroke="#ef4444"
                stroke-width="3"
                stroke-dasharray="8,4"
              />
            </svg>
            <span class="legend-label">Contradiction</span>
          </div>
        </div>
      </div>

      <!-- Side panel for viewing details -->
      <div id="detail-panel" class="detail-panel">
        <button class="close-panel" id="close-panel">×</button>
        <div id="panel-content"></div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
